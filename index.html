<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Group Date Cafe Quiz</title>
</head>
<body>

<div id="quiz-container">
    <div id="question"></div>
    <div id="answers"></div>
    <div id="result"></div>
</div>

<script>
const questionGroups = {
    starter: {
        questionText: "Does a difference in age or sex not matter as long as there is love?",
        answers: [
            { text: "Their sex matters", group: "group2A" },
            { text: "It doesn't matter at all!", group: "group2B" }
        ]
    },

    group2A: [
        {
            questionText: "What's your idea of a good time together?",
            answers: [
                { text: "Definitely outdoors!", group: "group3" },
                { text: "Positively indoors!", group: "group1" }
            ]
        }
    ],

    group2B: [
        {
            questionText: "How do you want the person you like to act towards you?",
            answers: [
                { text: "Make a bold move on me", group: "group2" },
                { text: "Make a modest move on me", group: "group4" }
            ]
        }
    ],

    group1: [
        {
            questionText: "What kind of club would you be interested in joining?",
            answers: [
                { text: "The Gardening Club", person: null },
                { text: "The Diving Club", person: null },
                { text: "The Technology Club", person: "Fuuka Yamagishi" }
            ]
        },
        {
            questionText: "What kind of older lady do you like?",
            answers: [
                { text: "One talented at lame jokes", person: "Margaret" },
                { text: "One good at looking after others", person: null },
                { text: "One who's actually an older man", person: null }
            ]
        },
        {
            questionText: "That girl you're curious about dropped something. What was it?",
            answers: [
                { text: "A floral-pattern handkerchief", person: null },
                { text: "A lacy parasol", person: null },
                { text: "Some handwritten poetry", person: "Marie" }
            ]
        },
        {
            questionText: "What surprised you about the one you fell in love with?",
            answers: [
                { text: "They're a crane, not a human", person: null },
                { text: "They're a girl, not a prince", person: "Naoto Shirogane" }
            ]
        },
        {
            questionText: "What do you live on?",
            answers: [
                { text: "Rice", person: null },
                { text: "Bread", person: null },
                { text: "Donuts", person: "Rei" }
            ]
        },
        {
            questionText: "Where would you go to soothe your weary soul?",
            answers: [
                { text: "A hot springs inn", person: "Yukiko Amagi" },
                { text: "An extravagant resort", person: null },
                { text: "A mountain cabin", person: null }
            ]
        },
        {
            questionText: "What you look for in a woman is...",
            answers: [
                { text: "A keen-eyed, shy Japanese girl", person: "Yukiko Amagi" },
                { text: "A sensitive, literary sort", person: "Marie" },
                { text: "Someone mysterious in a sleek car", person: "Margaret" },
                { text: "Something else...", person: null }
            ]
        },
        {
            questionText: "What kind of girl makes your heart skip a beat?",
            answers: [
                { text: "Someone reserved and considerate", person: "Fuuka Yamagishi" },
                { text: "Overwhelming intellect", person: "Naoto Shirogane" },
                { text: "A healthy appetite", person: "Rei" },
            ]
        }
    ],

    group2: [
        {
            questionText: "What's the number one topping for beef bowls?",
            answers: [
                { text: "Red pickled ginger", person: null },
                { text: "Protein", person: "Akihiko Sanada" },
                { text: "Green onions", person: null }
            ]
        },
        {
            questionText: "All together now:",
            answers: [
                { text: "\"Let's go have some fun!\"", person: null },
                { text: "\"Even the ace detective gives up!\"", person: "Junpei Iori" }
            ]
        },
        {
            questionText: "What's the most important accompaniment for food?",
            answers: [
                { text: "A tall glass of milk", person: "Ken Amada" },
                { text: "Warm green tea", person: null },
                { text: "Mad Bull", person: null },
                { text: "Someone to eat with", person: null }
            ]
        },
        {
            questionText: "What do you most seek comfort in?",
            answers: [
                { text: "Relaxing music", person: null },
                { text: "Massages", person: null },
                { text: "Squishy dog pads", person: "Koromaru" }
            ]
        },
        {
            questionText: "What's in your refrigerator?",
            answers: [
                { text: "Dinner leftovers", person: null },
                { text: "Cold barley tea", person: null },
                { text: "Some kind of grass", person: "Yu Narukami" }
            ]
        },
        {
            questionText: "What is the primary characteristic of a cute girl?",
            answers: [
                { text: "A lovely smile", person: null },
                { text: "She wears glasses", person: null },
                { text: "Makes bear puns", person: "Teddie" }
            ]
        },
        {
            questionText: "What you look for in a man is...",
            answers: [
                { text: "A great sense of humor", person: "Junpei Iori" },
                { text: "Well-honed muscles", person: "Akihiko Sanada" },
                { text: "Rock-solid reliability", person: "Yu Narukami" },
                { text: "Something else...", person: null }
            ]
        },
        {
            questionText: "What kind of girl makes your heart skip a beat?",
            answers: [
                { text: "Youth that tries to act mature", person: "Ken Amada" },
                { text: "A pure heart", person: "Teddie" },
                { text: "Overwhelming adorableness", person: "Koromaru" },
                { text: "Something else...", person: null }
            ]
        }
    ],

    group3: [
        {
            questionText: "Which would you choose?",
            answers: [
                { text: "The Voluptuous Abaddon", person: null },
                { text: "A titanium-bodied beauty", person: "Aigis" }
            ]
        },
        {
            questionText: "You're feeling a bit hungry... What do you reach for?",
            answers: [
                { text: "A rice ball", person: null },
                { text: "Meat gum", person: "Chie Satonaka" }
            ]
        },
        {
            questionText: "What makes her charming?",
            answers: [
                { text: "The way she runs up an escalator", person: "Elizabeth" },
                { text: "The way animals eat her food scraps", person: null },
                { text: "Her taking home my electronics", person: null }
            ]
        },
        {
            questionText: "Someone you like gave you a compliment. What did they say?",
            answers: [
                { text: "You're amazing!", person: null },
                { text: "You're so cool!", person: null },
                { text: "C'est magnifique!", person: "Mitsuru Kirijo" }
            ]
        },
        {
            questionText: "What do you like to do to liven things up?",
            answers: [
                { text: "Play King's Game at a club", person: "Rise Kujikawa" },
                { text: "Singing contests at karaoke", person: null },
                { text: "Arcade tournaments", person: null },
                { text: "Read at a library", person: null }
            ]
        },
        {
            questionText: "If you were going to master something, it'd definitely be this!",
            answers: [
                { text: "Calligraphy", person: null },
                { text: "Flower arrangement", person: null },
                { text: "Archery", person: "Yukari Takeba" }
            ]
        },
        {
            questionText: "What you look for in a woman is...",
            answers: [
                { text: "Brains and beauty", person: "Mitsuru Kirijo" },
                { text: "An invincible idol smile", person: "Rise Kujikawa" },
                { text: "Polite and proper behaviour", person: "Elizabeth" },
                { text: "Something else...", person: null }
            ]
        },
        {
            questionText: "What kind of girl makes your heart skip a beat?",
            answers: [
                { text: "Sharp-tongued, yet lonely", person: "Yukari Takeba" },
                { text: "An energetic crybaby", person: "Chie Satonaka" },
                { text: "Abs of literal steel", person: "Aigis" },
            ]
        }
    ],

    group4: [
        {
            questionText: "What is the best place for some alone time?",
            answers: [
                { text: "Relaxing at a cafe", person: null },
                { text: "A thrilling amusement park", person: null },
                { text: "Hands-on at a bath house", person: "Kanji Tatsumi" }
            ]
        },
        {
            questionText: "Are you starting to get tired of these questions?",
            answers: [
                { text: "Not really", person: null },
                { text: "Maybe", person: null },
                { text: "I don't care", person: "Makoto Yuki" }
            ]
        },
        {
            questionText: "What movies make you cry?",
            answers: [
                { text: "War films", person: null },
                { text: "Tragic romances", person: null },
                { text: "Incredible Pet Stories", person: "Shinjiro Aragaki" }
            ]
        },
        {
            questionText: "If you could be reborn into another family, what would your role be?",
            answers: [
                { text: "Older brother to sisters", person: null },
                { text: "Younger brother of sisters", person: "Theodore" },
                { text: "A trustworthy sister", person: null }
            ]
        },
        {
            questionText: "How would you express your feelings to the one you like?",
            answers: [
                { text: "Tell them in person", person: null },
                { text: "Slug it out at a riverbed", person: "Yosuke Hanamura" },
                { text: "Something else...", person: null }
            ]
        },
        {
            questionText: "Oh no! Your beloved is in danger!",
            answers: [
                { text: "Rush over at once", person: null },
                { text: "Level your bowgun", person: "Zen" },
                { text: "Stand back and watch", person: null }
            ]
        },
        {
            questionText: "What you look for in a man is...",
            answers: [
                { text: "A motherly, caring side", person: "Shinjiro Aragaki" },
                { text: "A cool, but wild side", person: "Makoto Yuki" },
                { text: "Skilled hands", person: "Kanji Tatsumi" },
                { text: "Something else...", person: null }
            ]
        },
        {
            questionText: "What kind of girl makes your heart skip a beat?",
            answers: [
                { text: "Somewhat disappointing good looks", person: "Yosuke Hanamura" },
                { text: "A knight who protects the weak", person: "Zen" },
                { text: "A gentle youngest of siblings", person: "Theodore" },
            ]
        }
    ],

    randomQuestions: [
        {
            questionText: "You've upset your beloved! How will you make it up to them?",
            answers: ["Apologize profusely", "Butter them up with gifts", "Get angry and dodge the issue"]
        },
        {
            questionText: "In your next life, would you rather be a man or a woman?",
            answers: ["Definitely a Man", "A woman, obviously"]
        },
        {
            questionText: "Which would you rather be inside?",
            answers: ["A shark tank", "A lion cage"]
        },
        {
            questionText: "Clothing, food, or housing: which would you spend money on first?",
            answers: ["Definitely clothing", "Positively food", "Absolutely housing"]
        },
        {
            questionText: "If you had to eat one or the other, which would it be?",
            answers: ["A plate of wasabi", "A plate of sugar"]
        },
        {
            questionText: "Which kind of prize would you want to win?",
            answers: ["One gigantic one", "Recurring small prizes"]
        },
        {
            questionText: "What's the first thing you get in line for at the amusement park?",
            answers: ["Screaming roller coasters", "Romantic merry-go-rounds", "Whirling tea cups"]
        },
        {
            questionText: "What is your greatest weapon?",
            answers: ["My dazzling smile", "My passionate eyes", "My conversational skills", "My pure heart"]
        },
        {
            questionText: "What do you do if someone you don't care for confesses their love?",
            answers: ["Might as well date them", "Start by being friends", "Hesitantly turn them down", "Bluntly reject them"]
        },
        {
            questionText: "Your specialty dish is...",
            answers: ["Curry", "Meat and potatoes", "Pickled mackerel"]
        }
    ]
};

let currentQuestionNumber = 1;
let currentGroup = 'starter';
let askedQuestions = new Set();
let finalOutput = null;

function displayQuestion(questionData) {
    const questionContainer = document.getElementById('question');
    const answersContainer = document.getElementById('answers');

    questionContainer.innerHTML = `<h2>Question ${currentQuestionNumber}</h2><p>${questionData.questionText}</p>`;
    answersContainer.innerHTML = '';

    questionData.answers.forEach((answer, index) => {
        const button = document.createElement('button');
        button.textContent = answer.text;
        button.addEventListener('click', () => handleAnswer(answer));
        answersContainer.appendChild(button);
    });
}

function handleAnswer(answer) {
    if (answer.group) {
        // Set the current group and show the first question of that group
        currentGroup = answer.group;
        displayNextGroupQuestion();
    } else {
        // Answer from a group question
        if (answer.person) {
            // A specific person was selected, determine final output
            finalOutput = answer.person;
            fillRemainingQuestionsWithRandom();
        } else {
            // No person was selected, continue with the group questions
            if (currentGroup && askedQuestions.size < 6) {
                // Still have questions left in the group
                displayNextGroupQuestion();
            } else {
                // Move on to the special question 9 after 6 questions
                if (currentQuestionNumber === 9) {
                    finalOutput = answer.person;
                    displayRandomQuestion();
                } else if (currentQuestionNumber === 10) {
                    finalOutput = answer.person;
                    displayFinalOutput();
                } else {
                    // We've finished the group questions, no specific person was selected
                    displaySpecialQuestion9();
                }
            }
        }
    }
}

function displayNextGroupQuestion() {
    const questions = questionGroups[currentGroup];
    let nextQuestion;

    // Ensure we shuffle and display questions correctly, avoiding repeats
    if (!askedQuestions.has(currentGroup)) {
        askedQuestions.add(currentGroup);
        shuffleQuestions(questions);
    }

    nextQuestion = questions.find(q => !q.asked);
    if (nextQuestion) {
        nextQuestion.asked = true;
        currentQuestionNumber++;
        displayQuestion(nextQuestion);
    } else {
        // Handle case where all questions in a group have been asked
    }
}

function shuffleQuestions(questions) {
    for (let i = questions.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [questions[i], questions[j]] = [questions[j], questions[i]];
    }
}

function displayRandomQuestion() {
    let nextQuestionIndex;
    do {
        nextQuestionIndex = Math.floor(Math.random() * questionGroups.randomQuestions.length);
    } while (askedQuestions.has(nextQuestionIndex + 100)); // Adding 100 to distinguish random questions indexes

    askedQuestions.add(nextQuestionIndex + 100); // Track random questions separately
    currentQuestionNumber++;
    displayQuestion(questionGroups.randomQuestions[nextQuestionIndex]);
}

function displaySpecialQuestion9() {
    // Directly access question 9 and display it
    currentQuestionNumber++;
    displayQuestion(questionGroups.specialQuestion9);
}

function fillRemainingQuestionsWithRandom() {
    // If we have determined the final output before reaching question 10,
    // we still need to fill the remaining questions with random ones.
    while (currentQuestionNumber < 10) {
        displayRandomQuestion();
    }
    displayFinalOutput();
}

function displayFinalOutput() {
    const resultContainer = document.getElementById('result');
    resultContainer.innerHTML = finalOutput ? `Your result is: ${finalOutput}` : "No result found.";
    // Reset quiz or navigate to a different page
}

// Start the quiz
displayQuestion();
</script>

</body>
</html>